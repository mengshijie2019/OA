(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5945e491"],{"159b":function(t,e,a){var o=a("da84"),s=a("fdbc"),n=a("17c2"),i=a("9112");for(var r in s){var c=o[r],d=c&&c.prototype;if(d&&d.forEach!==n)try{i(d,"forEach",n)}catch(l){d.forEach=n}}},"17c2":function(t,e,a){"use strict";var o=a("b727").forEach,s=a("a640"),n=a("ae40"),i=s("forEach"),r=n("forEach");t.exports=i&&r?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},"1f33":function(t,e,a){},4160:function(t,e,a){"use strict";var o=a("23e7"),s=a("17c2");o({target:"Array",proto:!0,forced:[].forEach!=s},{forEach:s})},"487e":function(t,e,a){"use strict";var o=a("e6aa"),s=a.n(o);s.a},7341:function(t,e,a){"use strict";var o=a("1f33"),s=a.n(o);s.a},8418:function(t,e,a){"use strict";var o=a("c04e"),s=a("9bf2"),n=a("5c6c");t.exports=function(t,e,a){var i=o(e);i in t?s.f(t,i,n(0,a)):t[i]=a}},"8d57":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isShow?a("div",{staticClass:"dialog"},[a("div",{staticClass:"dialog-content"},[a("div",{staticClass:"title-name"},[t._t("header",[t._v("新增")])],2),a("div",{staticClass:"close",on:{click:t.closeDialog}},[a("i",{staticClass:"el-icon-close"})]),t._t("coninput"),a("div",{staticClass:"content-footer"},[a("el-button",{staticStyle:{width:"80px",height:"40px",background:"#496bfa",color:"#fff","font-size":"16px"},attrs:{round:"",loading:t.loading},on:{click:t.sumbit}},[t._v("确认")]),a("el-button",{staticStyle:{width:"80px",height:"40px",border:"1px solid #496bfa",color:"#496bfa","font-size":"16px","box-sizing":"border-box"},attrs:{round:""},on:{click:t.closeDialog}},[t._v("取消")])],1)],2)]):t._e()},s=[],n={name:"AddDialog",props:{isShow:{type:Boolean,default:!1},titleName:{type:String},subTitleName:{type:String},loading:{type:Boolean,default:!1}},methods:{closeDialog:function(){this.$emit("close")},sumbit:function(){this.$emit("sumbit")}}},i=n,r=(a("487e"),a("0c7c")),c=Object(r["a"])(i,o,s,!1,null,"c5ff3378",null);e["a"]=c.exports},a434:function(t,e,a){"use strict";var o=a("23e7"),s=a("23cb"),n=a("a691"),i=a("50c4"),r=a("7b0b"),c=a("65f0"),d=a("8418"),l=a("1dde"),p=a("ae40"),u=l("splice"),m=p("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,g=9007199254740991,v="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!u||!m},{splice:function(t,e){var a,o,l,p,u,m,b=r(this),N=i(b.length),w=s(t,N),x=arguments.length;if(0===x?a=o=0:1===x?(a=0,o=N-w):(a=x-2,o=h(f(n(e),0),N-w)),N+a-o>g)throw TypeError(v);for(l=c(b,o),p=0;p<o;p++)u=w+p,u in b&&d(l,p,b[u]);if(l.length=o,a<o){for(p=w;p<N-o;p++)u=p+o,m=p+a,u in b?b[m]=b[u]:delete b[m];for(p=N;p>N-o+a;p--)delete b[p-1]}else if(a>o)for(p=N-o;p>w;p--)u=p+o-1,m=p+a-1,u in b?b[m]=b[u]:delete b[m];for(p=0;p<a;p++)b[p+w]=arguments[p+2];return b.length=N-o+a,l}})},e6aa:function(t,e,a){},f956:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"organization-list"}},[a("div",{staticClass:"header"},[a("div",{staticClass:"header-font"},[t._v("部门列表")]),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:t.addPostText}},[t._v("新增")])],1)]),a("div",{staticClass:"select-project"},[a("div",{staticClass:"select-left"},[a("span",{staticClass:"header-font"},[t._v("部门")]),a("el-select",{staticClass:"select-choose",attrs:{placeholder:"请选择"},on:{change:function(e){return t.selectDepartment()}},nativeOn:{click:function(e){return t.getDepartmentList(e)}},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}},t._l(t.optionsDepartment,(function(t){return a("el-option",{key:t.departmentId,attrs:{label:t.departmentName,value:t.departmentId}})})),1),a("el-select",{staticClass:"department-option",attrs:{placeholder:"请选择"},model:{value:t.post,callback:function(e){t.post=e},expression:"post"}},[t.optionsDepartment[1]&&t.department?t._l(t.optionsDepartment[1].posts,(function(t){return a("el-option",{key:t.postId,attrs:{label:t.postName,value:t.postId}})})):t._e()],2)],1),a("el-button",{attrs:{type:"primary"},on:{click:t.searchList}},[t._v("搜索")])],1),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData1,"row-key":"id","tree-props":{children:"posts"},"header-cell-style":t.backgroundRow}},[a("el-table-column",{attrs:{prop:"departmentName",label:"级别名称"}}),a("el-table-column",{attrs:{prop:"option",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"#59c4d6"},on:{click:function(a){return t.editorText(e.$index,e.row)}}},[t._v("编辑")]),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("|")]),a("span",{staticStyle:{color:"#ff0d43"},on:{click:function(a){return t.deleteRow(e.$index,e.row)}}},[t._v("删除")]),e.row.posts?a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("|")]):t._e(),e.row.posts?a("span",{staticStyle:{color:"#59c4d6"},on:{click:function(a){return t.addText(e.$index,e.row)}}},[t._v("新增岗位")]):t._e()]}}])})],1)],1),a("add-dialog",{attrs:{isShow:t.addShow},on:{sumbit:t.addSubmit,close:t.addCancel},scopedSlots:t._u([{key:"coninput",fn:function(){return[a("div",{staticClass:"dialog-body"},[a("div",[a("span",[t._v("部门名称：")]),a("el-input",{attrs:{type:"text",disabled:t.disable},model:{value:t.apartmentName,callback:function(e){t.apartmentName=e},expression:"apartmentName"}}),a("i",{staticClass:"el-icon-circle-plus-outline",staticStyle:{"font-size":"16px","margin-left":"10px"},on:{click:t.addPostName}})],1),t._l(t.addPost,(function(e,o){return a("div",{key:o},[a("span",[t._v("岗位名称：")]),a("el-input",{attrs:{type:"text"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"postItem.name"}}),o?a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"16px","margin-left":"10px"},on:{click:function(e){return t.deleteRowPost(o)}}}):t._e()],1)}))],2)]},proxy:!0}])}),a("add-dialog",{attrs:{isShow:t.showDialog},on:{sumbit:t.submit,close:t.cannel},scopedSlots:t._u([{key:"header",fn:function(){return[a("div",[t._v("编辑")])]},proxy:!0},{key:"coninput",fn:function(){return[a("div",{staticClass:"dialog-body"},[t.partEditor?a("div",{staticClass:"part-info"},[a("span",{staticClass:"header-font"},[t._v("部门名称：")]),a("el-input",{attrs:{type:"text"},model:{value:t.partName,callback:function(e){t.partName=e},expression:"partName"}})],1):t._e(),t.partEditor?t._e():a("div",{staticClass:"post-info"},[a("div",{staticClass:"select-left"},[a("span",{staticClass:"header-font"},[t._v("部门名称：")]),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.option},model:{value:t.editorOption,callback:function(e){t.editorOption=e},expression:"editorOption"}},t._l(t.tableData1,(function(t){return a("el-option",{key:t.departmentId,attrs:{label:t.departmentName,value:t.departmentId}})})),1)],1),a("div",{staticClass:"select-left"},[a("span",{staticClass:"header-font"},[t._v("岗位名称：")]),a("el-input",{attrs:{type:"text"},model:{value:t.postName,callback:function(e){t.postName=e},expression:"postName"}})],1)])])]},proxy:!0}])})],1)},s=[],n=(a("4160"),a("a434"),a("159b"),a("fd03")),i=a("8d57"),r={components:{addDialog:i["a"]},data:function(){return{loading:!0,addShow:!1,showDialog:!1,disable:!1,partEditor:!1,partName:"",postName:"",department:"",post:"",editorOption:"",apartmentName:"",rowInfo:{},addPost:[{name:""}],optionsDepartment:[{posts:[]}],options:[],tableData1:[]}},created:function(){this.getgrganizationalStructureList()},methods:{option:function(t){},addPostAndPart:function(t){var e=this;Object(n["b"])(t).then((function(t){200==t.code?(e.$message.success("新增成功！"),e.apartmentName="",e.addPost=[{name:""}],e.addShow=!1,e.getgrganizationalStructureList()):e.$message.erroe(t.$message)}))},editorTextInfo:function(t){var e=this;Object(n["l"])(t).then((function(t){200==t.code?(e.$message.success("编辑成功！"),e.postName="",e.partName="",e.editorOption="",e.showDialog=!1,e.getgrganizationalStructureList()):e.$message.erroe(t.message)}))},searchList:function(){this.getgrganizationalStructureList()},addText:function(t,e){this.addShow=!0,this.disable=!0,this.apartmentName=e.departmentName,this.rowInfo=e},addPostText:function(){this.addShow=!0,this.disable=!1},addPostName:function(){this.addPost.length>2?this.$message.warning("最多只能添加3个岗位！"):this.addPost.push({name:""})},deleteRowPost:function(t){this.addPost.splice(t,1)},getDepartmentList:function(){this.department="",this.post="",this.optionsDepartment=[{posts:[]}],this.getgrganizationalStructureList()},selectDepartment:function(){this.getgrganizationalStructureList()},getgrganizationalStructureList:function(){var t=this,e={};this.department&&(e.departmentId=this.department),this.post&&(e.postId=this.post),Object(n["v"])(e).then((function(e){if(200==e.code){t.loading=!1;var a=JSON.stringify(e.result.departments);t.optionsDepartment=JSON.parse(a),t.tableData1=JSON.parse(a),t.tableData1.forEach((function(t,e){t.id=t.departmentName,t.posts.forEach((function(e,a){e.id=e.postId,e.departmentName=e.postName,e.parnetId=t.departmentId,e.parnetName=t.departmentName}))})),t.optionsDepartment.unshift({departmentName:"全部"})}}))},backgroundRow:function(){return"background:#6e44d4;color:#ffffff;"},editorText:function(t,e){e.posts&&(this.partEditor=!0),this.editorOption=e.parnetId,this.postName=e.postName,this.partName=e.departmentName,this.showDialog=!0,this.rowInfo=e},submit:function(){var t=this;if(this.rowInfo.postId){var e={departmentId:this.editorOption,postId:this.rowInfo.postId,postName:this.postName};this.editorTextInfo(e)}else{var a={id:this.rowInfo.departmentId,name:this.partName,type:1};Object(n["m"])(a).then((function(e){200==e.code?(t.$message.success("编辑成功！"),t.postName="",t.partName="",t.editorOption="",t.showDialog=!1,t.getgrganizationalStructureList()):t.$message.error(e.message)}))}},cannel:function(){this.showDialog=!1,this.partEditor=!1,this.postName="",this.partName="",this.editorOption=""},addSubmit:function(){var t={};t=this.rowInfo.posts?{userId:localStorage.getItem("userId"),departmentId:this.rowInfo.departmentId,departmentName:this.rowInfo.departmentName,postNames:JSON.stringify(this.addPost)}:{userId:localStorage.getItem("userId"),departmentId:0,departmentName:this.apartmentName,postNames:JSON.stringify(this.addPost)},this.addPostAndPart(t)},addCancel:function(){this.addShow=!1,this.disable=!1,this.apartmentName="",this.addPost=[{name:""}]},deleteRow:function(t,e){var a=this,o="",s="";e.posts?(o=e.departmentId,s=1):(o=e.postId,s=2);var i={id:o,type:s};Object(n["f"])(i).then((function(t){200==t.code?(a.$message.success("删除成功！"),a.getgrganizationalStructureList()):a.$message.erroe(t.message)}))}}},c=r,d=(a("7341"),a("0c7c")),l=Object(d["a"])(c,o,s,!1,null,"1910f523",null);e["default"]=l.exports}}]);