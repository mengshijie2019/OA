(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-133e1835"],{"638b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"staff-info"}},[a("div",{staticClass:"info-title"},[a("el-select",{staticClass:"department-option",attrs:{placeholder:"请选择"},on:{change:function(e){return t.selectDepartment()}},nativeOn:{click:function(e){return t.getDepartmentList(e)}},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}},t._l(t.optionsDepartment,(function(t){return a("el-option",{key:t.departmentId,attrs:{label:t.departmentName,value:t.departmentId}})})),1),a("el-select",{staticClass:"department-option",attrs:{placeholder:"请选择"},model:{value:t.post,callback:function(e){t.post=e},expression:"post"}},[t.optionsDepartment[1]&&t.department?t._l(t.optionsDepartment[1].posts,(function(t){return a("el-option",{key:t.postId,attrs:{label:t.postName,value:t.postId}})})):t._e()],2),a("el-input",{staticClass:"department-option",staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名"},model:{value:t.staffName,callback:function(e){t.staffName=e},expression:"staffName"}}),a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(e){return t.look()}}},[t._v("查询")]),a("el-button",{staticClass:"button",attrs:{type:"primary",plain:""},on:{click:t.addInfo}},[t._v("新增")])],1),a("div",{staticClass:"table-style"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"员工编号","min-width":"18",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(8*(t.currentPage-1)+e.$index+1>=10?8*(t.currentPage-1)+e.$index+1:"0"+(8*(t.currentPage-1)+e.$index+1)))])]}}])}),a("el-table-column",{attrs:{label:"头像","min-width":"20",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"40px",height:"40px","border-radius":"5px"},attrs:{src:t.row.avatar,alt:""}})]}}])}),a("el-table-column",{attrs:{label:"姓名","min-width":"22",align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:"性别","min-width":"14",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(1==e.row.sex?"男":"女"))])]}}])}),a("el-table-column",{attrs:{label:"联系电话","min-width":"28",align:"center",prop:"phone"}}),a("el-table-column",{attrs:{label:"部门","min-width":"25",align:"center",prop:"departmentName"}}),a("el-table-column",{attrs:{label:"岗位","min-width":"25",align:"center",prop:"postName"}}),a("el-table-column",{attrs:{label:"操作","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"margin-left":"10px",padding:"8px","font-size":"12px"},attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{staticStyle:{"margin-left":"10px",padding:"8px","font-size":"12px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")]),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px",padding:"8px","font-size":"12px"},attrs:{type:"warning",icon:"el-icon-chicken"},on:{click:function(a){return t.rewardPunishmentThing(e.$index,e.row)}}},[t._v(" 奖惩 ")]),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px",padding:"8px","font-size":"12px"},attrs:{type:"success",icon:"el-icon-collection"},on:{click:function(a){return t.handleAdd(e.$index,e.row)}}},[t._v(" 工资 ")])]}}])})],1)],1),a("div",{staticClass:"page-nav"},[a("el-pagination",{staticStyle:{background:"#ffffff"},attrs:{background:"",layout:"prev, pager, next",total:t.totalPage,"current-page":t.currentPage,"page-size":8},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"奖惩金额",prop:"title"}},[a("el-input",{model:{value:t.temp.rpMoney,callback:function(e){t.$set(t.temp,"rpMoney",e)},expression:"temp.rpMoney"}})],1),a("el-form-item",{attrs:{label:"奖惩日期",prop:"timestamp"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.temp.rpDate,callback:function(e){t.$set(t.temp,"rpDate",e)},expression:"temp.rpDate"}})],1),a("el-form-item",{attrs:{label:"奖励还是惩罚",prop:"pAndr"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:t.temp.rpStatus,callback:function(e){t.$set(t.temp,"rpStatus",e)},expression:"temp.rpStatus"}},t._l(t.statusOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e+1}})})),1)],1),a("el-form-item",{attrs:{label:"奖惩内容"}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"请输入内容"},model:{value:t.temp.rpContent,callback:function(e){t.$set(t.temp,"rpContent",e)},expression:"temp.rpContent"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(" 取消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v(" 提交 ")])],1)],1),a("el-dialog",{attrs:{visible:t.dialogSalary,title:"添加该员工工资"},on:{"update:visible":function(e){t.dialogSalary=e}}},[a("div",[a("div",[a("span",[t._v("福利补贴：")]),a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},placeholder:"请输入"},model:{value:t.addSalary.welfareAllowance,callback:function(e){t.$set(t.addSalary,"welfareAllowance",e)},expression:"addSalary.welfareAllowance"}})],1),a("div",[a("span",[t._v("住房公积金：")]),a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},placeholder:"请输入"},model:{value:t.addSalary.housingProvidentFund,callback:function(e){t.$set(t.addSalary,"housingProvidentFund",e)},expression:"addSalary.housingProvidentFund"}})],1),a("div",[a("span",[t._v("失业保险：")]),a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},placeholder:"请输入"},model:{value:t.addSalary.unemploymentInsurance,callback:function(e){t.$set(t.addSalary,"unemploymentInsurance",e)},expression:"addSalary.unemploymentInsurance"}})],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirmSalary()}}},[t._v("提交")])],1)])],1)},i=[],r=(a("b0c0"),a("fd03")),l={data:function(){return{addSalary:{welfareAllowance:"",housingProvidentFund:"",unemploymentInsurance:""},dialogSalary:!1,row:{},showReviewer:!1,temp:{id:void 0,importance:1,remark:"",rpMoney:"",rpContent:"",rpDate:"",rpStatus:1},textMap:{update:"Edit",create:"新增"},statusOptions:["奖励","惩罚"],rules:{timestamp:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],title:[{required:!0,message:"请输入奖惩金额",trigger:"blur"}],pAndr:[{required:!0,message:"请选择奖励还是惩罚",trigger:"visible-change"}]},dialogFormVisible:!1,dialogStatus:"",loading:!0,optionsDepartment:[{posts:[]}],department:"",post:"",staffName:"",tableData:[],currentPage:1,totalPage:1}},created:function(){this.getgrganizationalStructureList(),this.getStaffList(this.currentPage)},methods:{handleCurrentChange:function(t){this.currentPage=t,this.getStaffList(t)},confirmSalary:function(){var t=this,e={staffId:this.row.id,welfareAllowance:this.addSalary.welfareAllowance,housingProvidentFund:this.addSalary.housingProvidentFund,unemploymentInsurance:this.addSalary.unemploymentInsurance};Object(r["d"])(e).then((function(e){200==e.code?(t.$message.success="提交成功！",t.dialogSalary=!1,t.addSalary={},t.getList(1)):t.$message.error(e.message)}))},handleAdd:function(t,e){this.row=e,this.addSalary={},this.dialogSalary=!0},createData:function(){var t=this,e={staffId:this.row.id,rpMoney:this.temp.rpMoney,rpContent:this.temp.rpContent,rpDate:this.temp.rpDate,rpStatus:this.temp.rpStatus};Object(r["c"])(e).then((function(e){200==e.code?(t.$message.success("提交成功！"),t.dialogFormVisible=!1,t.temp={}):t.$message.error(e,message)}))},addInfo:function(){localStorage.setItem("isHave",1),this.$router.push("/addEmployeeInfo")},getDepartmentList:function(){this.department="",this.post="",this.optionsDepartment=[{posts:[]}],this.getgrganizationalStructureList()},selectDepartment:function(){this.getgrganizationalStructureList()},getStaffList:function(t){var e=this,a={page:t,size:8,userLevel:2};this.department&&(a.departmentId=this.department),this.post&&(a.postId=this.post),this.staffName&&(a.name=this.staffName),Object(r["p"])(a).then((function(t){if(200==t.code){var a=JSON.stringify(t.page.records);e.tableData=JSON.parse(a),e.totalPage=t.page.total,e.loading=!1}}))},getgrganizationalStructureList:function(){var t=this,e={};this.department&&(e.departmentId=this.department),Object(r["v"])(e).then((function(e){if(200==e.code){var a=JSON.stringify(e.result.departments);t.optionsDepartment=JSON.parse(a),t.optionsDepartment.unshift({departmentName:"全部"})}}))},look:function(){this.currentPage=1,this.getStaffList(this.currentPage)},handleEdit:function(t,e){localStorage.setItem("isHave",1),this.$router.push({path:"/addEmployeeInfo",query:{id:e.id}})},rewardPunishmentThing:function(t,e){var a=this;this.row=e,this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){a.$refs["dataForm"].clearValidate()}))},resetTemp:function(){this.temp={id:void 0,importance:1,remark:"",rpMoney:"",rpContent:"",rpDate:"",rpStatus:1}},handleDelete:function(t,e){var a=this;Object(r["j"])({id:e.id}).then((function(t){200==t.code&&(a.currentPage=1,a.getStaffList(a.currentPage))}))}}},s=l,o=(a("7104"),a("80a5"),a("0c7c")),c=Object(o["a"])(s,n,i,!1,null,null,null);e["default"]=c.exports},7104:function(t,e,a){"use strict";var n=a("f268"),i=a.n(n);i.a},"80a5":function(t,e,a){"use strict";var n=a("8e94"),i=a.n(n);i.a},"8e94":function(t,e,a){},f268:function(t,e,a){}}]);