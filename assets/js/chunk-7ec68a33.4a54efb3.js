(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ec68a33"],{2899:function(e,t,s){},c9d1:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"user-info"}},[s("div",{staticStyle:{display:"flex","justify-content":"center",padding:"30px 10px","align-items":"center","margin-bottom":"50px"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:8081/api/uploadFiles",enctype:"multipart/form-data","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?s("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),s("el-form",{ref:"userInfo",attrs:{model:e.userInfo,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"姓名："}},[s("el-input",{model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}})],1),s("el-form-item",{attrs:{label:"性别："}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userInfo.sex,callback:function(t){e.$set(e.userInfo,"sex",t)},expression:"userInfo.sex"}},e._l(e.sexArray,(function(e,t){return s("el-option",{key:t,attrs:{label:e,value:t+1}})})),1)],1),s("el-form-item",{attrs:{label:"联系电话："}},[s("el-input",{attrs:{maxlength:"11"},model:{value:e.userInfo.phone,callback:function(t){e.$set(e.userInfo,"phone",t)},expression:"userInfo.phone"}})],1),s("el-form-item",{attrs:{label:"账号："}},[s("el-input",{model:{value:e.userInfo.account,callback:function(t){e.$set(e.userInfo,"account",t)},expression:"userInfo.account"}})],1),s("el-form-item",{attrs:{label:"密码："}},[s("el-input",{attrs:{placeholder:"******"},model:{value:e.userInfo.password,callback:function(t){e.$set(e.userInfo,"password",t)},expression:"userInfo.password"}})],1),s("el-form-item",{attrs:{label:"年龄："}},[s("el-input",{attrs:{maxlength:"2"},model:{value:e.userInfo.age,callback:function(t){e.$set(e.userInfo,"age",t)},expression:"userInfo.age"}})],1),s("el-form-item",{attrs:{label:"出生日期："}},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.userInfo.birthday,callback:function(t){e.$set(e.userInfo,"birthday",t)},expression:"userInfo.birthday"}})],1),s("el-form-item",{attrs:{label:"身份证号："}},[s("el-input",{attrs:{maxlength:"18"},model:{value:e.userInfo.identityCard,callback:function(t){e.$set(e.userInfo,"identityCard",t)},expression:"userInfo.identityCard"}})],1),s("el-form-item",{attrs:{label:"学历："}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userInfo.education,callback:function(t){e.$set(e.userInfo,"education",t)},expression:"userInfo.education"}},e._l(e.educationLevel,(function(e){return s("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1)],1),s("el-form-item",{attrs:{label:"政治面貌："}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userInfo.politicalStatus,callback:function(t){e.$set(e.userInfo,"politicalStatus",t)},expression:"userInfo.politicalStatus"}},e._l(e.politicalStatusArray,(function(e,t){return s("el-option",{key:t,attrs:{label:e,value:t+1}})})),1)],1),s("el-form-item",{attrs:{label:"健康状态："}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userInfo.healthStatus,callback:function(t){e.$set(e.userInfo,"healthStatus",t)},expression:"userInfo.healthStatus"}},e._l(e.healthStatusArray,(function(e){return s("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1)],1),s("el-form-item",{attrs:{label:"是否已婚："}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userInfo.isMarried,callback:function(t){e.$set(e.userInfo,"isMarried",t)},expression:"userInfo.isMarried"}},e._l(e.isMarriedArray,(function(e,t){return s("el-option",{key:t,attrs:{label:e,value:t+1}})})),1)],1),s("el-form-item",{attrs:{label:"薪酬："}},[s("el-input",{model:{value:e.userInfo.payment,callback:function(t){e.$set(e.userInfo,"payment",t)},expression:"userInfo.payment"}})],1),s("el-form-item",{attrs:{label:"住址："}},[s("el-input",{model:{value:e.userInfo.address,callback:function(t){e.$set(e.userInfo,"address",t)},expression:"userInfo.address"}})],1),s("el-form-item",{attrs:{label:"籍贯："}},[s("el-input",{model:{value:e.userInfo.nativePlace,callback:function(t){e.$set(e.userInfo,"nativePlace",t)},expression:"userInfo.nativePlace"}})],1),s("el-form-item",{attrs:{label:"毕业院校："}},[s("el-input",{model:{value:e.userInfo.graduateSchool,callback:function(t){e.$set(e.userInfo,"graduateSchool",t)},expression:"userInfo.graduateSchool"}})],1),s("el-form-item",{attrs:{label:"所学专业："}},[s("el-input",{model:{value:e.userInfo.majorStudied,callback:function(t){e.$set(e.userInfo,"majorStudied",t)},expression:"userInfo.majorStudied"}})],1),e.isHave?s("el-form-item",{attrs:{label:"开始工作时："}},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.userInfo.startworkTime,callback:function(t){e.$set(e.userInfo,"startworkTime",t)},expression:"userInfo.startworkTime"}})],1):e._e(),e.isHave?s("el-form-item",{attrs:{label:"部门名称："}},[s("el-select",{staticClass:"department-option",attrs:{placeholder:"请选择"},on:{change:function(t){return e.selectDepartment()}},nativeOn:{click:function(t){return e.getDepartmentList(t)}},model:{value:e.userInfo.departmentName,callback:function(t){e.$set(e.userInfo,"departmentName",t)},expression:"userInfo.departmentName"}},e._l(e.optionsDepartment,(function(t){return s("el-option",{key:t.departmentId,attrs:{label:t.departmentName,value:t.departmentId},nativeOn:{click:function(s){return e.selectDepartmentName(t.departmentName)}}})})),1)],1):e._e(),e.isHave?s("el-form-item",{attrs:{label:"岗位名称："}},[s("el-select",{staticClass:"department-option",attrs:{placeholder:"请选择"},model:{value:e.userInfo.postName,callback:function(t){e.$set(e.userInfo,"postName",t)},expression:"userInfo.postName"}},[e.optionsDepartment[0]&&this.userInfo.departmentName?e._l(e.optionsDepartment[0].posts,(function(t){return s("el-option",{key:t.postId,attrs:{label:t.postName,value:t.postId},nativeOn:{click:function(s){return e.selectpostName(t.postName)}}})})):e._e()],2)],1):e._e(),e.id&&e.isHave?s("el-form-item",{attrs:{label:"登记人姓名："}},[s("el-input",{attrs:{disabled:""},model:{value:e.userInfo.registrantpersonName,callback:function(t){e.$set(e.userInfo,"registrantpersonName",t)},expression:"userInfo.registrantpersonName"}})],1):e._e()],1),s("div",{staticStyle:{"text-align":"center",padding:"30px 0"}},[s("el-button",{staticStyle:{margin:"0 50px",width:"100px"},attrs:{type:"danger"},on:{click:function(t){return e.reset()}}},[e._v("重置")]),s("el-button",{staticStyle:{margin:"0 50px",width:"100px"},attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("保存")])],1)],1)},r=[],n=(s("b0c0"),s("d3b7"),s("3ca3"),s("ddb0"),s("2b3d"),s("fd03")),i=(s("f5ef"),{data:function(){return{isHave:0,imageUrl:"",selectDepartmentD:"",selectpostD:"",optionsDepartment:[{posts:[]}],id:"",sexArray:["男","女"],educationLevel:[{id:1,value:"小学"},{id:2,value:"初中"},{id:3,value:"高中"},{id:4,value:"中专"},{id:5,value:"大专"},{id:6,value:"本科"},{id:7,value:"研究生"},{id:8,value:"硕士"},{id:9,value:"博士"},{id:10,value:"博士后"}],politicalStatusArray:["中共党员","中共预备党员","共青团员","民革党员","民盟盟员","民建会员","民进会员","农工党党员","致公党党员","九三学社社员","台盟盟员","无党派人士","群众"],isMarriedArray:["已婚","未婚"],healthStatusArray:[{id:1,value:"正常"},{id:2,value:"良好"},{id:3,value:"一般"}],userInfo:{account:"",addTime:"",address:"",age:null,avatar:"",birthday:"",departmentId:null,departmentName:"",education:null,graduateSchool:"",healthStatus:null,identityCard:"",isMarried:null,majorStudied:"",name:"",nativePlace:"",password:"",payment:null,phone:"",politicalStatus:null,postName:"",registrantpersonName:"",sex:null,startworkTime:""},userInformation:{}}},created:function(){var e=localStorage.getItem("userInfo");this.userInformation=JSON.parse(e),this.id=this.$route.query.id,this.getgrganizationalStructureList(),this.id&&this.getfVal()},methods:{handleAvatarSuccess:function(e,t){200==e.code?this.userInfo.avatar=e.result:this.$message(e.message),this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,s=e.size/1024/1024<10;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),s||this.$message.error("上传头像图片大小不能超过 10MB!"),t&&s},selectDepartmentName:function(e){this.selectDepartmentD=e},selectpostName:function(e){this.selectpostD=e},getDepartmentList:function(){this.userInfo.postName="",this.userInfo.departmentName="",this.optionsDepartment=[{posts:[]}],this.getgrganizationalStructureList()},selectDepartment:function(){this.getgrganizationalStructureList()},getgrganizationalStructureList:function(){var e=this,t={};this.userInfo.departmentName&&(t.departmentId=this.userInfo.departmentName),Object(n["v"])(t).then((function(t){if(200==t.code){var s=JSON.stringify(t.result.departments);e.optionsDepartment=JSON.parse(s)}}))},reset:function(){this.id?this.getfVal():this.userInfo={}},save:function(){var e=this;if(!this.userInfo.name)return this.$message.warning("请输入姓名"),!1;if(!this.userInfo.sex)return this.$message.warning("请输入性别"),!1;if(!this.userInfo.phone)return this.$message.warning("请输入联系电话"),!1;if(!this.userInfo.account)return this.$message.warning("请输入账号"),!1;var t="";if(this.userInfo.password&&(t=this.$md5(this.$md5(this.$md5(this.userInfo.password))).toUpperCase()),!this.id&&!this.userInfo.password)return this.$message.warning("请输入密码"),!1;if(!this.userInfo.avatar)return this.$message.warning("请输入头像"),!1;if(!this.userInfo.birthday)return this.$message.warning("请输入出生日期"),!1;if(!this.userInfo.age)return this.$message.warning("请输入年龄"),!1;if(!this.userInfo.identityCard)return this.$message.warning("请输入身份证号"),!1;if(!this.userInfo.education)return this.$message.warning("请输入学历"),!1;if(!this.userInfo.politicalStatus)return this.$message.warning("请输入政治面貌"),!1;if(!this.userInfo.healthStatus)return this.$message.warning("请输入健康状态"),!1;if(!this.userInfo.isMarried)return this.$message.warning("请输入婚姻状态"),!1;if(!this.userInfo.payment)return this.$message.warning("请输入薪酬"),!1;if(!this.userInfo.address)return this.$message.warning("请输入住址"),!1;if(!this.userInfo.nativePlace)return this.$message.warning("请输入籍贯"),!1;if(!this.userInfo.graduateSchool)return this.$message.warning("请输入毕业院校"),!1;if(!this.userInfo.startworkTime)return this.$message.warning("请输入开始工作时间"),!1;if(!this.userInfo.departmentName)return this.$message.warning("请输入所属部门"),!1;if(!this.userInfo.postName)return this.$message.warning("请输入岗位名称"),!1;var s="",a="",r="",i="";this.selectDepartmentD?(s=this.userInfo.departmentName,a=this.selectDepartmentD):(s=this.userInfo.departmentId,a=this.userInfo.departmentName),this.selectpostD?(r=this.userInfo.postName,i=this.selectpostD):(r=this.userInfo.postId,i=this.userInfo.postName);var o={name:this.userInfo.name,sex:this.userInfo.sex,phone:this.userInfo.phone,account:this.userInfo.account,password:t,avatar:this.userInfo.avatar,userLevel:2,age:this.userInfo.age,birthday:this.userInfo.birthday,identityCard:this.userInfo.identityCard,education:this.userInfo.education,politicalStatus:this.userInfo.politicalStatus,nativePlace:this.userInfo.nativePlace,healthStatus:this.userInfo.healthStatus,isMarried:this.userInfo.isMarried,payment:this.userInfo.payment,address:this.userInfo.address,graduateSchool:this.userInfo.graduateSchool,majorStudied:this.userInfo.majorStudied,startworkTime:this.userInfo.startworkTime,departmentId:s,departmentName:a,postId:r,postName:i,registrantpersonId:this.userInformation.userId,registrantpersonName:this.userInformation.name};this.id&&(o.id=this.id),Object(n["y"])(o).then((function(t){200==t.code?(e.id?(e.$message.success("编辑成功！"),e.userInfo={}):(e.$message.success("新增成功！"),e.userInfo={}),e.$router.back()):e.$message.error(t.message)}))},getfVal:function(){var e=this;Object(n["u"])({userId:this.id}).then((function(t){200==t.code&&(e.userInfo=t.result.user,e.imageUrl=t.result.user.avatar,e.userInfo.password="",e.isHave=+localStorage.getItem("isHave"))}))}},beforeDestroy:function(){}}),o=i,l=(s("d879"),s("0c7c")),u=Object(l["a"])(o,a,r,!1,null,"19854ca5",null);t["default"]=u.exports},d879:function(e,t,s){"use strict";var a=s("2899"),r=s.n(a);r.a},f5ef:function(e,t,s){"use strict";var a=s("2b0e");new a["default"]}}]);